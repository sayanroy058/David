{% extends 'base_new.html' %}
{% block title %}Book Collection - Professional Library{% endblock %}

{% block content %}
<!-- Modern Hero Section -->
<section class="modern-hero-section position-relative overflow-hidden py-5 mb-5">
  <!-- Background Elements -->
  <div class="hero-bg-pattern"></div>
  <div class="hero-floating-shapes">
    <div class="floating-shape shape-1"></div>
    <div class="floating-shape shape-2"></div>
    <div class="floating-shape shape-3"></div>
  </div>
  
  <div class="container position-relative">
    <div class="row align-items-center justify-content-center">
      <div class="col-lg-10 col-xl-8 text-center">
        <!-- Main Title -->
        <div class="hero-badge mb-3">
          <span class="badge-text">
            <i class="bi bi-bookmark-star me-2"></i>
            Professional Library
          </span>
        </div>
        
        <h1 class="hero-main-title mb-4">
          Our <span class="text-gradient">Book Collection</span>
        </h1>
        
        <p class="hero-description mb-5">
          Discover knowledge that transforms careers and enriches minds with our carefully curated collection of professional books
        </p>
        
        <!-- CTA Button -->
        <div class="hero-cta">
          <a href="#books-section" class="btn btn-hero-primary btn-lg">
            <i class="bi bi-arrow-down-circle me-2"></i>
            Explore Collection
          </a>
        </div>
      </div>
    </div>
  </div>
</section>

<div class="container">
<!-- Advanced Search & Filter Section -->
<section class="mb-4">
  <div class="card border-0 shadow-sm bg-white search-filter-card">
    <div class="card-header bg-transparent border-0 py-3">
      <div class="d-flex align-items-center justify-content-between">
        <div>
          <h3 class="h6 mb-1 fw-semibold">
            <i class="bi bi-funnel me-2 text-primary"></i>
            Advanced Search & Filters
          </h3>
          <p class="text-muted small mb-0 d-none d-md-block">Find exactly what you're looking for</p>
        </div>
        <button class="btn btn-outline-secondary btn-sm filter-toggle" type="button" data-bs-toggle="collapse" data-bs-target="#filterCollapse">
          <i class="bi bi-chevron-down"></i>
        </button>
      </div>
    </div>

    <div class="collapse" id="filterCollapse">
      <div class="card-body pt-0">
        <form method="GET" class="mobile-filter-form">

          <!-- Mobile-Optimized Form Fields -->
          <div class="row g-3">
            <!-- Book Title -->
            <div class="col-12 col-md-6 col-lg-3">
              <label class="form-label small fw-medium text-secondary">Book Title</label>
              <div class="input-group input-group-mobile">
                <span class="input-group-text bg-light border-end-0">
                  <i class="bi bi-search text-muted"></i>
                </span>
                <input type="text" name="title" class="form-control border-start-0" placeholder="Enter book title..." value="{{ request.args.get('title', '') }}">
              </div>
            </div>

            <!-- Author -->
            <div class="col-12 col-md-6 col-lg-3">
              <label class="form-label small fw-medium text-secondary">Author</label>
              <div class="input-group input-group-mobile">
                <span class="input-group-text bg-light border-end-0">
                  <i class="bi bi-person text-muted"></i>
                </span>
                <input type="text" name="author" class="form-control border-start-0" placeholder="Author name..." value="{{ request.args.get('author', '') }}">
              </div>
            </div>

            <!-- Category -->
            <div class="col-12 col-md-6 col-lg-3">
              <label class="form-label small fw-medium text-secondary">Category</label>
              <div class="input-group input-group-mobile">
                <span class="input-group-text bg-light border-end-0">
                  <i class="bi bi-bookmarks text-muted"></i>
                </span>
                <select name="category" class="form-select border-start-0">
                  <option value="">All Categories</option>
                  {% for cat in categories %}
                    <option value="{{ cat }}" {% if request.args.get('category') == cat %}selected{% endif %}>{{ cat }}</option>
                  {% endfor %}
                </select>
              </div>
            </div>

            <!-- Subject -->
            <div class="col-12 col-md-6 col-lg-3">
              <label class="form-label small fw-medium text-secondary">Sub Categories</label>
              <div class="input-group input-group-mobile">
                <span class="input-group-text bg-light border-end-0">
                  <i class="bi bi-journal-bookmark text-muted"></i>
                </span>
                <select name="subject" class="form-select border-start-0">
                  <option value="">All Sub Categories</option>
                  {% for sub in subjects %}
                    <option value="{{ sub }}" {% if request.args.get('subject') == sub %}selected{% endif %}>{{ sub }}</option>
                  {% endfor %}
                </select>
              </div>
            </div>

            <!-- Price Range -->
            <div class="col-12 col-md-6 col-lg-3">
              <label class="form-label small fw-medium text-secondary">Price Range (₹)</label>
              <div class="d-flex gap-2">
                <input type="number" name="min_price" class="form-control form-control-mobile" placeholder="Min" step="0.01" min="0" value="{{ request.args.get('min_price', '') }}">
                <input type="number" name="max_price" class="form-control form-control-mobile" placeholder="Max" step="0.01" min="0" value="{{ request.args.get('max_price', '') }}">
              </div>
            </div>

            <!-- Submit Button -->
            <div class="col-12 col-md-6 col-lg-3">
              <label class="form-label small fw-medium text-secondary d-block d-lg-none">&nbsp;</label>
              <div class="d-grid">
                <button type="submit" class="btn btn-primary btn-mobile">
                  <i class="bi bi-funnel me-1"></i>Apply Filters
                </button>
              </div>
            </div>
          </div>

          <!-- Clear Filters Notice -->
          {% if request.args %}
          <div class="col-12">
            <div class="d-flex justify-content-between align-items-center">
              <span class="text-muted small">
                <i class="bi bi-info-circle me-1"></i>
                Showing filtered results
              </span>
              <a href="{{ url_for('books') }}" class="btn btn-outline-secondary btn-sm">
                <i class="bi bi-arrow-clockwise me-1"></i>Clear All Filters
              </a>
            </div>
          </div>
          {% endif %}

        </form>
      </div>
    </div>
  </div>
</section>


  <!-- Category Quick Navigation - Hidden for cleaner look -->
  {% if false %}
  <section class="mb-4 d-none">
    <div class="card border-0 shadow-sm">
      <div class="card-body py-3">
        <div class="d-flex align-items-center justify-content-between mb-3">
          <h6 class="mb-0 fw-semibold text-secondary">
            <i class="bi bi-compass me-2"></i>Quick Category Navigation
          </h6>
          <small class="text-muted">{{ books_by_category|length }} categories</small>
        </div>
        <div class="d-flex flex-wrap gap-2">
          {% for category in books_by_category.keys() %}
          <a href="#category-{{ loop.index }}" class="btn btn-outline-primary btn-sm category-nav-btn">
            <i class="bi bi-bookmark me-1"></i>{{ category }}
            <span class="badge bg-primary ms-1">{{ books_by_category[category]|length }}</span>
          </a>
          {% endfor %}
        </div>
      </div>
    </div>
  </section>
  {% endif %}

  
      
      <!-- View Controls -->
     
    </div>
  </section>

<!-- Book Collection Section -->
<section id="books-section" class="container py-5">
  {% if books %}
    
    {% if view_type == 'category' and books_by_category %}
      <!-- Category View -->
      {% for category, category_books in books_by_category.items() %}
      <div class="mb-5" id="category-{{ loop.index }}">
        <!-- Category Header -->
        <div class="d-flex align-items-center justify-content-between mb-4">
          <div class="d-flex align-items-center">
            <h3 class="h4 fw-bold text-primary mb-0">
              <i class="bi bi-bookmarks me-2"></i>{{ category }}
            </h3>
            <span class="badge bg-light text-dark ms-3">{{ category_books|length }} book{{ 's' if category_books|length != 1 else '' }}</span>
          </div>
          <a href="{{ url_for('books', category=category, view='list') }}" class="btn btn-outline-primary btn-sm">
            <i class="bi bi-arrow-right me-1"></i>View All
          </a>
        </div>
        
        <!-- Category Books -->
        <div class="row g-4" id="books-container-{{ loop.index }}">
          {% for book in category_books %}
          <div class="col-xl-3 col-lg-4 col-md-6">
            <div class="card h-100 border-0 shadow-sm hover-shadow transition-all rounded-3 book-card">
              
              <!-- Book Image -->
              <div class="position-relative overflow-hidden rounded-top" style="height: 280px;">
                <a href="{{ url_for('book_detail', book_id=book.id) }}" class="text-decoration-none">
                  {% if book.images %}
                  <img src="{{ url_for('static', filename='uploads/books/' + book.images[0].image_filename) }}"
                       class="w-100 h-100"
                       alt="{{ book.title }}"
                       style="transition: transform 0.3s ease; object-fit: contain;"
                       onmouseover="this.style.transform='scale(1.05)'"
                       onmouseout="this.style.transform='scale(1)'">
                  {% else %}
                  <div class="w-100 h-100 bg-light d-flex align-items-center justify-content-center">
                    <i class="bi bi-book text-muted" style="font-size: 3rem;"></i>
                  </div>
                  {% endif %}
                </a>

                <!-- Subject Badge -->
                {% if book.subject %}
                <span class="badge bg-secondary position-absolute top-0 start-0 m-2 rounded-pill px-3 py-2">
                  {{ book.subject }}
                </span>
                {% endif %}

                <!-- Quick Actions -->
                <div class="position-absolute top-0 end-0 m-2 d-flex flex-column gap-1">
                  <button class="btn btn-light btn-sm rounded-circle shadow-sm" title="Add to Wishlist">
                    <i class="bi bi-heart text-danger"></i>
                  </button>
                  <button class="btn btn-light btn-sm rounded-circle shadow-sm" title="Quick View">
                    <i class="bi bi-eye text-primary"></i>
                  </button>
                </div>
              </div>

              <!-- Book Details -->
              <div class="card-body d-flex flex-column p-3">
                <!-- Book Title -->
                <h6 class="card-title text-dark fw-semibold mb-2 book-title" style="line-height: 1.3; height: 2.6em; overflow: hidden;">
                  <a href="{{ url_for('book_detail', book_id=book.id) }}" class="text-decoration-none text-dark">
                    {{ book.title }}
                  </a>
                </h6>

                <!-- Author -->
                <div class="mb-2 text-muted small author-info">
                  <i class="bi bi-person-fill me-1 text-primary"></i>{{ book.author }}
                </div>
                
                <!-- Rating Display -->
                <div class="mb-2 d-flex align-items-center">
                  <div class="text-warning small me-1">
                    {% for i in range(1, 6) %}
                      {% if i <= book.avg_rating %}
                        <i class="bi bi-star-fill"></i>
                      {% elif i <= book.avg_rating + 0.5 %}
                        <i class="bi bi-star-half"></i>
                      {% else %}
                        <i class="bi bi-star"></i>
                      {% endif %}
                    {% endfor %}
                  </div>
                  <span class="text-muted small">
                    {{ "%.1f"|format(book.avg_rating) }} ({{ (book.review_count - 1) if book.review_count > 0 else 0 }})
                  </span>
                </div>

                <!-- Price Section -->
                <div class="price-section mb-3">
                  {% if book.original_price %}
                  <div class="d-flex align-items-center gap-2 mb-1">
                    <span class="text-muted small text-decoration-line-through">₹{{ "%.2f"|format(book.original_price) }}</span>
                    {% if book.original_price and book.original_price > book.price %}
                    {% set discount = ((book.original_price - book.price) / book.original_price) * 100 %}
                    <span class="badge bg-danger small">{{ discount | round(0, 'floor') }}% OFF</span>
                    {% endif %}
                  </div>
                  {% endif %}
                  
                  <div class="d-flex align-items-center">
                    <span class="h6 fw-bold text-success mb-0">₹{{ "%.2f"|format(book.price) }}</span>
                  </div>
                </div>

                <!-- Stock Warning -->
                {% if book.quantity < 5 %}
                <div class="alert alert-warning py-1 px-2 small mb-2">
                  <i class="bi bi-exclamation-triangle-fill me-1"></i>
                  Only {{ book.quantity }} left in stock!
                </div>
                {% endif %}

                <!-- Description -->
                <p class="card-text small text-secondary flex-grow-1 mb-3" style="line-height: 1.4; height: 3em; overflow: hidden;">
                  {{ book.description | truncate(60, true) }}
                </p>
              </div>

              <!-- Action Buttons -->
              <div class="card-footer bg-light border-0 p-3">
                <div class="d-flex flex-column gap-2">
                  <!-- Primary Action -->
                  <a href="{{ url_for('book_detail', book_id=book.id) }}" class="btn btn-outline-primary btn-sm">
                    <i class="bi bi-eye me-1"></i>VIEW DETAILS
                  </a>
                  
                  <!-- Secondary Actions -->
                  <div class="d-flex gap-2">
                    <a href="{{ url_for('buy_now', book_id=book.id) }}" class="btn btn-success btn-sm flex-fill">
                      <i class="bi bi-lightning-fill me-1"></i>BUY
                    </a>
                    <a href="{{ url_for('add_to_cart', book_id=book.id) }}" class="btn btn-outline-success btn-sm flex-fill">
                      <i class="bi bi-cart-plus me-1"></i>CART
                    </a>
                  </div>
                </div>
              </div>

            </div>
          </div>
          {% endfor %}
        </div>
        
        {% if not loop.last %}
        <hr class="my-5">
        {% endif %}
      </div>
      {% endfor %}
      
    {% else %}
      <!-- List View -->
      <div class="row g-4" id="books-container">
        {% for book in books %}
        <div class="col-xl-3 col-lg-4 col-md-6">
          <div class="card h-100 border-0 shadow-sm hover-shadow transition-all rounded-3 book-card">
            
            <!-- Book Image -->
            <div class="position-relative overflow-hidden rounded-top" style="height: 280px;">
              <a href="{{ url_for('book_detail', book_id=book.id) }}" class="text-decoration-none">
                {% if book.images %}
                <img src="{{ url_for('static', filename='uploads/books/' + book.images[0].image_filename) }}"
                     class="w-100 h-100"
                     alt="{{ book.title }}"
                     style="transition: transform 0.3s ease; object-fit: contain;"
                     onmouseover="this.style.transform='scale(1.05)'"
                     onmouseout="this.style.transform='scale(1)'">
                {% else %}
                <div class="w-100 h-100 bg-light d-flex align-items-center justify-content-center">
                  <i class="bi bi-book text-muted" style="font-size: 3rem;"></i>
                </div>
                {% endif %}
              </a>

              <!-- Category Badge -->
              <span class="badge bg-primary position-absolute top-0 start-0 m-2 rounded-pill px-3 py-2">
                {{ book.category or 'Uncategorized' }}
              </span>

              <!-- Quick Actions -->
              <div class="position-absolute top-0 end-0 m-2 d-flex flex-column gap-1">
                <button class="btn btn-light btn-sm rounded-circle shadow-sm" title="Add to Wishlist">
                  <i class="bi bi-heart text-danger"></i>
                </button>
                <button class="btn btn-light btn-sm rounded-circle shadow-sm" title="Quick View">
                  <i class="bi bi-eye text-primary"></i>
                </button>
              </div>
            </div>

            <!-- Book Details -->
            <div class="card-body d-flex flex-column p-3">
              <!-- Book Title -->
              <h6 class="card-title text-dark fw-semibold mb-2 book-title" style="line-height: 1.3; height: 2.6em; overflow: hidden;">
                <a href="{{ url_for('book_detail', book_id=book.id) }}" class="text-decoration-none text-dark">
                  {{ book.title }}
                </a>
              </h6>

              <!-- Author & Subject -->
              <div class="mb-2 text-muted small author-info">
                <i class="bi bi-person-fill me-1 text-primary"></i>{{ book.author }}
              </div>
              <div class="mb-2 text-muted small">
                <i class="bi bi-bookmark-fill me-1 text-secondary"></i>{{ book.subject or 'N/A' }}
              </div>
              
              <!-- Rating Display -->
               <div class="mb-2 d-flex align-items-center">
                 <div class="text-warning small me-1">
                   {% for i in range(1, 6) %}
                     {% if i <= book.avg_rating %}
                       <i class="bi bi-star-fill"></i>
                     {% elif i <= book.avg_rating + 0.5 %}
                       <i class="bi bi-star-half"></i>
                     {% else %}
                       <i class="bi bi-star"></i>
                     {% endif %}
                   {% endfor %}
                 </div>
                 <span class="text-muted small">
                   {{ "%.1f"|format(book.avg_rating) }} ({{ book.review_count }})
                 </span>
               </div>

              <!-- Price Section -->
              <div class="price-section mb-3">
                {% if book.original_price %}
                <div class="d-flex align-items-center gap-2 mb-1">
                  <span class="text-muted small text-decoration-line-through">₹{{ "%.2f"|format(book.original_price) }}</span>
                  {% if book.original_price and book.original_price > book.price %}
                  {% set discount = ((book.original_price - book.price) / book.original_price) * 100 %}
                  <span class="badge bg-danger small">{{ discount | round(0, 'floor') }}% OFF</span>
                  {% endif %}
                </div>
                {% endif %}
                
                <div class="d-flex align-items-center">
                  <span class="h6 fw-bold text-success mb-0">₹{{ "%.2f"|format(book.price) }}</span>
                </div>
              </div>

              <!-- Stock Warning -->
              {% if book.quantity < 5 %}
              <div class="alert alert-warning py-1 px-2 small mb-2">
                <i class="bi bi-exclamation-triangle-fill me-1"></i>
                Only {{ book.quantity }} left in stock!
              </div>
              {% endif %}

              <!-- Description -->
              <p class="card-text small text-secondary flex-grow-1 mb-3" style="line-height: 1.4; height: 3em; overflow: hidden;">
                {{ book.description | truncate(80, true) }}
              </p>
            </div>

            <!-- Action Buttons -->
            <div class="card-footer bg-light border-0 p-3">
              <div class="d-flex flex-column gap-2">
                <!-- Primary Action -->
                <a href="{{ url_for('book_detail', book_id=book.id) }}" class="btn btn-outline-primary btn-sm">
                  <i class="bi bi-eye me-1"></i>VIEW DETAILS
                </a>
                
                <!-- Secondary Actions -->
                <div class="d-flex gap-2">
                  <a href="{{ url_for('buy_now', book_id=book.id) }}" class="btn btn-success btn-sm flex-fill">
                    <i class="bi bi-lightning-fill me-1"></i>BUY
                  </a>
                  <a href="{{ url_for('add_to_cart', book_id=book.id) }}" class="btn btn-outline-success btn-sm flex-fill">
                    <i class="bi bi-cart-plus me-1"></i>CART
                  </a>
                </div>
              </div>
            </div>

          </div>
        </div>
        {% endfor %}
      </div>
    {% endif %}
    
  {% else %}
    <!-- Empty State -->
    <div class="text-center py-5">
      <div class="mb-4">
        <i class="bi bi-search text-muted" style="font-size: 4rem;"></i>
      </div>
      <h3 class="h4 text-muted mb-3">No Books Found</h3>
      <p class="text-muted mb-4">
        We couldn't find any books matching your search criteria.<br>
        Try adjusting your filters or browse our complete collection.
      </p>
      <div class="d-flex justify-content-center gap-3">
        <a href="{{ url_for('books') }}" class="btn btn-primary">
          <i class="bi bi-arrow-clockwise me-2"></i>View All Books
        </a>
        <button class="btn btn-outline-secondary" onclick="document.querySelector('input[name=title]').focus()">
          <i class="bi bi-search me-2"></i>Try New Search
        </button>
      </div>
    </div>
    {% endif %}
  </section>

  <!-- Call to Action Section -->
  {% if books %}
  <section class="bg-light rounded-3 p-5 text-center">
    <div class="row justify-content-center">
      <div class="col-lg-8">
        <h3 class="h4 fw-bold mb-3">Can't Find What You're Looking For?</h3>
        <p class="text-muted mb-4">
          Our collection is constantly growing. Contact us for book recommendations 
          or to request specific titles for your professional development needs.
        </p>
        <div class="d-flex justify-content-center gap-3 flex-wrap">
          <a href="#" class="btn btn-primary">
            <i class="bi bi-envelope me-2"></i>Contact Us
          </a>
          <a href="#" class="btn btn-outline-secondary">
            <i class="bi bi-bell me-2"></i>Get Notified of New Arrivals
          </a>
        </div>
      </div>
    </div>
  </section>
  {% endif %}
</div>

<!-- Custom Styles -->
<style>
.hover-shadow-lg:hover {
  box-shadow: 0 1rem 3rem rgba(0,0,0,.175) !important;
}

.transition-all {
  transition: all 0.3s ease;
}

.card:hover {
  transform: translateY(-2px);
}

.input-group-text {
  border: 1px solid #dee2e6;
}

.form-control:focus {
  border-color: #0d6efd;
  box-shadow: 0 0 0 0.2rem rgba(13, 110, 253, 0.25);
}

.btn-group input[type="radio"]:checked + label {
  background-color: #0d6efd;
  border-color: #0d6efd;
  color: white;
}

/* Category navigation styles */
.category-nav-btn {
  transition: all 0.3s ease;
  border-radius: 20px !important;
}

.category-nav-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 8px rgba(0,0,0,0.1);
}

.category-nav-btn .badge {
  font-size: 0.7em;
}

/* Category section highlight */
.category-highlight {
  background-color: #f8f9fa !important;
  border-radius: 10px;
  padding: 20px;
  margin: -20px;
}

/* Results Summary Section */
.results-summary-container {
  background: white;
  border-radius: 15px;
  padding: 1.5rem;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
  border: 1px solid rgba(0, 0, 0, 0.05);
}

.results-header {
  text-align: center;
}

.results-title {
  font-size: 1.5rem;
  font-weight: 700;
  color: #2c3e50;
  margin-bottom: 0.5rem;
}

.results-stats {
  font-size: 0.95rem;
  margin-bottom: 0;
}

.view-controls {
  display: flex;
  flex-direction: column;
  gap: 1rem;
  align-items: center;
}

.view-type-controls {
  width: 100%;
  max-width: 300px;
}

.btn-view {
  font-weight: 600;
  font-size: 0.9rem;
  padding: 0.6rem 1rem;
  border-radius: 8px;
  transition: all 0.3s ease;
}

.btn-view:hover {
  transform: translateY(-1px);
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
}

.layout-controls .btn-group {
  border-radius: 8px;
  overflow: hidden;
}

.layout-controls .btn {
  border-radius: 0;
  padding: 0.5rem 0.75rem;
}

/* Active view button */
.btn.active, .btn-primary {
  background-color: #0d6efd;
  border-color: #0d6efd;
  color: white;
}

/* Desktop Layout */
@media (min-width: 768px) {
  .results-summary-container {
    padding: 2rem;
  }
  
  .results-header {
    text-align: left;
    margin-bottom: 1.5rem;
  }
  
  .results-title {
    font-size: 1.75rem;
  }
  
  .view-controls {
    flex-direction: row;
    justify-content: space-between;
    align-items: center;
  }
  
  .view-type-controls {
    width: auto;
    max-width: none;
  }
  
  .btn-view {
    font-size: 0.95rem;
    padding: 0.7rem 1.2rem;
  }
}

/* Enhanced Book Card Styles */
.book-title {
  font-size: 0.95rem;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
  text-overflow: ellipsis;
}

.author-info {
  font-size: 0.85rem;
  font-weight: 500;
}

.price-section {
  border-left: 3px solid #28a745;
  padding-left: 0.75rem;
  background: rgba(40, 167, 69, 0.05);
  border-radius: 0 4px 4px 0;
  margin-left: -0.75rem;
  padding-right: 0.75rem;
}

/* Card Footer Styling */
.card-footer.bg-light {
  background-color: #f8f9fa !important;
  border-top: 1px solid #e9ecef;
}

/* Button Enhancements */
.btn-sm {
  font-size: 0.8rem;
  font-weight: 600;
  letter-spacing: 0.5px;
  padding: 0.4rem 0.8rem;
  border-radius: 6px;
  transition: all 0.3s ease;
}

.btn-sm:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0,0,0,0.15);
}

.btn-success {
  background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
  border: none;
}

.btn-success:hover {
  background: linear-gradient(135deg, #218838 0%, #1ea085 100%);
}

.btn-outline-success:hover {
  background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
  border-color: #28a745;
}

.btn-outline-primary {
  border-width: 2px;
  font-weight: 600;
}

.btn-outline-primary:hover {
  background-color: #0d6efd;
  border-color: #0d6efd;
  transform: translateY(-2px);
}

/* Card Hover Effects */
.card:hover {
  transform: translateY(-5px);
  box-shadow: 0 8px 25px rgba(0,0,0,0.15);
}

/* Alert Styling */
.alert-warning {
  background-color: #fff3cd;
  border-color: #ffeaa7;
  color: #856404;
  border-radius: 6px;
  font-size: 0.8rem;
}

/* Icon Enhancements */
.bi-person-fill, .bi-bookmark-fill {
  font-size: 0.9rem;
}

.bi-lightning-fill {
  color: #ffc107;
}

.bi-cart-plus {
  font-size: 0.9rem;
}

/* Book Card Enhancements */
.book-card {
  border: 1px solid rgba(0,0,0,0.08);
  overflow: hidden;
  transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}

.book-card:hover {
  border-color: rgba(13, 110, 253, 0.3);
  box-shadow: 0 10px 30px rgba(0,0,0,0.12);
}

/* Image Container */
.book-card .position-relative {
  background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
}

/* Badge Improvements */
.badge.bg-secondary {
  background: linear-gradient(135deg, #6c757d 0%, #495057 100%) !important;
  font-size: 0.7rem;
  font-weight: 500;
}

.badge.bg-danger {
  background: linear-gradient(135deg, #dc3545 0%, #c82333 100%) !important;
  font-size: 0.7rem;
  font-weight: 600;
  animation: pulse 2s infinite;
}

@keyframes pulse {
  0% { transform: scale(1); }
  50% { transform: scale(1.05); }
  100% { transform: scale(1); }
}

/* Quick Action Buttons */
.btn.rounded-circle {
  width: 32px;
  height: 32px;
  padding: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  backdrop-filter: blur(10px);
  background: rgba(255,255,255,0.9) !important;
  border: 1px solid rgba(0,0,0,0.1);
}

.btn.rounded-circle:hover {
  background: rgba(255,255,255,1) !important;
  transform: scale(1.1);
}

/* Modern Hero Section */
.modern-hero-section {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  min-height: 60vh;
  display: flex;
  align-items: center;
}

.hero-bg-pattern {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-image: 
    radial-gradient(circle at 20% 50%, rgba(255,255,255,0.1) 0%, transparent 50%),
    radial-gradient(circle at 80% 20%, rgba(255,255,255,0.1) 0%, transparent 50%),
    radial-gradient(circle at 40% 80%, rgba(255,255,255,0.1) 0%, transparent 50%);
  animation: float 20s ease-in-out infinite;
}

.hero-floating-shapes {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: hidden;
}

.floating-shape {
  position: absolute;
  border-radius: 50%;
  background: rgba(255, 255, 255, 0.1);
  animation: floatShape 15s ease-in-out infinite;
}

.shape-1 {
  width: 100px;
  height: 100px;
  top: 20%;
  left: 10%;
  animation-delay: 0s;
}

.shape-2 {
  width: 150px;
  height: 150px;
  top: 60%;
  right: 15%;
  animation-delay: 5s;
}

.shape-3 {
  width: 80px;
  height: 80px;
  bottom: 20%;
  left: 70%;
  animation-delay: 10s;
}

@keyframes floatShape {
  0%, 100% { transform: translateY(0px) rotate(0deg); }
  50% { transform: translateY(-20px) rotate(180deg); }
}

/* Hero Content */
.hero-badge {
  display: inline-block;
  margin-bottom: 1rem;
}

.badge-text {
  background: rgba(255, 255, 255, 0.2);
  backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.3);
  padding: 0.5rem 1.5rem;
  border-radius: 50px;
  font-size: 0.9rem;
  font-weight: 500;
  color: white;
  display: inline-block;
}

.hero-main-title {
  font-size: 3.5rem;
  font-weight: 800;
  line-height: 1.2;
  margin-bottom: 1.5rem;
}

.text-gradient {
  background: linear-gradient(45deg, #ffd700, #ffed4e);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.hero-description {
  font-size: 1.2rem;
  line-height: 1.6;
  opacity: 0.9;
  max-width: 600px;
  margin: 0 auto;
}

/* Removed stats cards styles - no longer needed */

/* Hero CTA Button */
.btn-hero-primary {
  background: linear-gradient(45deg, #ff6b6b, #ee5a24);
  border: none;
  border-radius: 50px;
  padding: 1rem 2.5rem;
  font-weight: 600;
  font-size: 1.1rem;
  color: white;
  text-decoration: none;
  display: inline-flex;
  align-items: center;
  transition: all 0.3s ease;
  box-shadow: 0 10px 30px rgba(255, 107, 107, 0.3);
}

.btn-hero-primary:hover {
  transform: translateY(-3px);
  box-shadow: 0 15px 40px rgba(255, 107, 107, 0.4);
  color: white;
}

/* Mobile Search Filter Improvements */
.search-filter-card {
  border-radius: 15px;
  overflow: hidden;
}

.filter-toggle {
  border-radius: 20px;
  padding: 0.25rem 0.75rem;
}

.mobile-filter-form {
  padding: 0.5rem 0;
}

.input-group-mobile {
  border-radius: 10px;
  overflow: hidden;
  box-shadow: 0 2px 4px rgba(0,0,0,0.05);
  transition: all 0.3s ease;
}

.input-group-mobile.focused {
  box-shadow: 0 4px 12px rgba(13, 110, 253, 0.15);
  transform: translateY(-1px);
}

.filter-toggle.active {
  background-color: #0d6efd;
  border-color: #0d6efd;
  color: white;
}

.form-control-mobile {
  border-radius: 8px;
  padding: 0.6rem 0.75rem;
  font-size: 0.9rem;
}

.btn-mobile {
  border-radius: 10px;
  padding: 0.6rem 1rem;
  font-weight: 600;
  font-size: 0.9rem;
}

/* Responsive Improvements */
@media (max-width: 768px) {
  .hero-title {
    font-size: 1.6rem;
  }
  
  .hero-subtitle {
    font-size: 0.9rem;
    margin-bottom: 1.5rem !important;
  }
  
  .stat-card {
    padding: 0.75rem 0.5rem !important;
  }
  
  .stat-number {
    font-size: 0.8rem;
  }
  
  .stat-label {
    font-size: 0.7rem;
  }
  
  .book-card {
    margin-bottom: 1rem;
  }
  
  .price-section {
    margin-left: -0.5rem;
    padding-left: 0.5rem;
    padding-right: 0.5rem;
  }
  
  .search-filter-card .card-header {
    padding: 1rem 1rem 0.5rem 1rem;
  }
  
  .mobile-filter-form {
    padding: 0.5rem 0 1rem 0;
  }
  
  .form-label {
    margin-bottom: 0.25rem;
    font-size: 0.85rem;
  }
  
  .input-group-text {
    padding: 0.5rem 0.75rem;
  }
  
  .form-control, .form-select {
    padding: 0.5rem 0.75rem;
    font-size: 0.9rem;
  }
}

@media (max-width: 768px) {
  .modern-hero-section {
    min-height: 40vh;
    padding: 3rem 0;
  }
  
  .hero-main-title {
    font-size: 2.2rem;
  }
  
  .hero-description {
    font-size: 1rem;
    margin-bottom: 2rem !important;
  }
  
  .btn-hero-primary {
    padding: 0.8rem 2rem;
    font-size: 1rem;
  }
  
  /* Mobile Results Summary */
  .results-summary-container {
    padding: 1rem;
    margin: 0 -0.25rem;
    border-radius: 12px;
  }
  
  .results-title {
    font-size: 1.3rem;
  }
  
  .results-stats {
    font-size: 0.85rem;
  }
  
  .btn-view {
    font-size: 0.85rem;
    padding: 0.5rem 0.8rem;
  }
  
  .view-controls {
    gap: 0.75rem;
  }
}

@media (max-width: 576px) {
  .modern-hero-section {
    min-height: 35vh;
    padding: 2rem 0;
  }
  
  .hero-main-title {
    font-size: 1.8rem;
    margin-bottom: 1rem !important;
  }
  
  .hero-description {
    font-size: 0.9rem;
    margin-bottom: 1.5rem !important;
  }
  
  .badge-text {
    padding: 0.4rem 1rem;
    font-size: 0.8rem;
  }
  
  .btn-hero-primary {
    padding: 0.7rem 1.5rem;
    font-size: 0.9rem;
  }
  
  .floating-shape {
    display: none; /* Hide floating shapes on very small screens */
  }
}

/* Responsive Hero Styles */
@media (min-width: 992px) {
  .hero-main-title {
    font-size: 4rem;
  }
  
  .hero-description {
    font-size: 1.3rem;
  }
}

@media (max-width: 991px) {
  .hero-main-title {
    font-size: 2.8rem;
  }
  
  .hero-description {
    font-size: 1.1rem;
  }
}

@media (max-width: 768px) {
  .display-4 {
    font-size: 2rem;
  }
  
  .col-xl-3.col-lg-4.col-md-6 {
    flex: 0 0 auto;
    width: 100%;
  }
}
</style>

<!-- JavaScript for Enhanced Functionality -->
<script>
document.addEventListener('DOMContentLoaded', function() {
  // Category navigation smooth scrolling
  const categoryNavBtns = document.querySelectorAll('.category-nav-btn');
  categoryNavBtns.forEach(btn => {
    btn.addEventListener('click', function(e) {
      e.preventDefault();
      const targetId = this.getAttribute('href');
      const targetElement = document.querySelector(targetId);
      if (targetElement) {
        targetElement.scrollIntoView({
          behavior: 'smooth',
          block: 'start'
        });
        
        // Add highlight effect
        targetElement.style.transition = 'background-color 0.3s ease';
        targetElement.style.backgroundColor = '#f8f9fa';
        setTimeout(() => {
          targetElement.style.backgroundColor = '';
        }, 1000);
      }
    });
  });

  // View toggle functionality
  const gridView = document.getElementById('grid-view');
  const listLayout = document.getElementById('list-layout');
  const booksContainers = document.querySelectorAll('[id^="books-container"]');
  
  if (listLayout) {
    listLayout.addEventListener('change', function() {
      if (this.checked) {
        booksContainers.forEach(container => {
          container.className = 'row g-3';
          const bookItems = container.querySelectorAll('.col-xl-3, .col-lg-4, .col-md-6');
          bookItems.forEach(item => {
            item.className = 'col-12';
            const card = item.querySelector('.card');
            if (card) {
              card.classList.add('flex-row');
              const imgContainer = card.querySelector('.position-relative');
              if (imgContainer) {
                imgContainer.style.width = '200px';
                imgContainer.style.height = '150px';
                imgContainer.style.flexShrink = '0';
              }
            }
          });
        });
      }
    });
  }
  
  if (gridView) {
    gridView.addEventListener('change', function() {
      if (this.checked) {
        booksContainers.forEach(container => {
          container.className = 'row g-4';
          const bookItems = container.querySelectorAll('.col-12');
          bookItems.forEach(item => {
            item.className = 'col-xl-3 col-lg-4 col-md-6';
            const card = item.querySelector('.card');
            if (card) {
              card.classList.remove('flex-row');
              const imgContainer = card.querySelector('.position-relative');
              if (imgContainer) {
                imgContainer.style.width = 'auto';
                imgContainer.style.height = '280px';
                imgContainer.style.flexShrink = '';
              }
            }
          });
        });
      }
    });
  }
  
  // Enhanced filter collapse with mobile improvements
  const filterToggle = document.querySelector('.filter-toggle');
  const filterCollapse = document.getElementById('filterCollapse');
  
  if (filterToggle && filterCollapse) {
    // Auto-collapse on mobile by default
    if (window.innerWidth <= 768) {
      filterCollapse.classList.remove('show');
    }
    
    filterCollapse.addEventListener('shown.bs.collapse', function() {
      filterToggle.innerHTML = '<i class="bi bi-chevron-up"></i>';
      filterToggle.classList.add('active');
    });
    
    filterCollapse.addEventListener('hidden.bs.collapse', function() {
      filterToggle.innerHTML = '<i class="bi bi-chevron-down"></i>';
      filterToggle.classList.remove('active');
    });
    
    // Smooth scroll to filters when opened on mobile
    filterCollapse.addEventListener('shown.bs.collapse', function() {
      if (window.innerWidth <= 768) {
        setTimeout(() => {
          filterCollapse.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }, 300);
      }
    });
  }
  
  // Mobile form enhancements
  const mobileInputs = document.querySelectorAll('.form-control-mobile, .input-group-mobile .form-control, .input-group-mobile .form-select');
  mobileInputs.forEach(input => {
    input.addEventListener('focus', function() {
      this.closest('.input-group-mobile')?.classList.add('focused');
    });
    
    input.addEventListener('blur', function() {
      this.closest('.input-group-mobile')?.classList.remove('focused');
    });
  });

  // Auto-update category counts (for dynamic updates)
  function updateCategoryCounts() {
    const categoryBtns = document.querySelectorAll('.category-nav-btn');
    categoryBtns.forEach(btn => {
      const categoryId = btn.getAttribute('href');
      const categorySection = document.querySelector(categoryId);
      if (categorySection) {
        const bookCount = categorySection.querySelectorAll('.col-xl-3, .col-lg-4, .col-md-6, .col-12').length;
        const badge = btn.querySelector('.badge');
        if (badge) {
          badge.textContent = bookCount;
        }
      }
    });
  }

  // Call update function on page load
  updateCategoryCounts();
  
  // Smooth scroll for hero CTA button
  const heroCTA = document.querySelector('.btn-hero-primary');
  if (heroCTA) {
    heroCTA.addEventListener('click', function(e) {
      e.preventDefault();
      const target = document.querySelector('#books-section');
      if (target) {
        target.scrollIntoView({
          behavior: 'smooth',
          block: 'start'
        });
      }
    });
  }
});
</script>
<style>
/* --------- Floating Button ---------- */
.shadow-floating-chat {
  position: fixed; bottom: 20px; right: 20px;
  box-shadow: 0 4px 18px rgba(13,110,253,0.25);
  width: 54px; height: 54px;
  display: flex; align-items: center; justify-content: center;
  font-size: 1.8rem;
  border-radius: 50%;
  background: #0d6efd;
  color: #fff;
  cursor: pointer;
  transition: box-shadow 0.25s, transform 0.1s;
  z-index: 1050;
}
.shadow-floating-chat:hover {
  transform: scale(1.08);
  box-shadow: 0 8px 24px rgba(13,110,253,0.35);
}

/* --------- Chatbot Box ---------- */
.chatbot-box {
  position: fixed;
  bottom: 80px;
  right: 20px;
  width: 300px;   /* default (tablet) */
  height: 380px;  /* default (tablet) */
  max-width: 95vw;
  max-height: 80vh;
  background: #fff;
  border-radius: 16px;
  box-shadow: 0 12px 32px rgba(0,0,0,0.15);
  display: flex;
  flex-direction: column;
  overflow: hidden;
  transform: translateY(30px);
  opacity: 0;
  pointer-events: none;
  transition: all 0.3s ease;
  z-index: 1060;
}
.chatbot-box.show {
  transform: translateY(0);
  opacity: 1;
  pointer-events: auto;
}

/* --------- Chat Header ---------- */
.chatbot-header {
  background: #0d6efd;
  color: #fff;
  padding: 8px 12px;
  display: flex;
  align-items: center;
  justify-content: space-between;
}
.chatbot-header img {
  border-radius: 50%;
  margin-right: 6px;
}

/* --------- Chat Body ---------- */
.chatbot-body {
  flex: 1;
  padding: 8px;
  overflow-y: auto;
  background: #f8f9fa;
}

/* --------- Messages ---------- */
.msg-bubble {
  max-width: 75%;
  border-radius: 15px;
  padding: 8px 12px;
  font-size: 0.95rem;
  margin-bottom: 6px;
  animation: bubbleSlideIn 0.25s ease;
}
.chat-message { display: flex; margin-bottom: 6px; }
.user-msg { justify-content: flex-end; }
.bot-msg { justify-content: flex-start; }
.user-msg .msg-bubble {
  background: linear-gradient(135deg, #0d6efd 90%, #3db0ef 100%);
  color: #fff;
  border-bottom-right-radius: 0;
}
.bot-msg .msg-bubble {
  background: #fff;
  border: 1px solid #dee2e6;
  color: #212529;
  border-bottom-left-radius: 0;
}

/* --------- Input Area ---------- */
.chatbot-footer {
  padding: 6px;
  border-top: 1px solid #dee2e6;
  display: flex;
  gap: 6px;
}
#userInput {
  flex: 1;
  border-radius: 10px;
  border: 1px solid #dee2e6;
  padding: 5px 8px;
  font-size: 0.9rem;
}
#userInput:focus {
  border-color: #0d6efd;
  box-shadow: 0 0 0 2px rgba(13,110,253,0.1);
}
.send-btn {
  background: #0d6efd;
  border: none;
  color: #fff;
  padding: 5px 10px;
  border-radius: 10px;
  cursor: pointer;
  font-size: 0.9rem;
  transition: background 0.2s;
}
.send-btn:hover { background: #0b5ed7; }

/* --------- Responsive ---------- */
/* Desktop (large) */
@media (min-width: 992px) {
  .chatbot-box {
    width: 340px;
    height: 420px;
  }
}

/* Mobile (small) */
@media (max-width: 480px) {
  .chatbot-box {
    right: 10px;
    bottom: 70px;
    width: 90vw;
    height: 70vh;
  }
}
</style>


<!-- Floating Chat Button -->
<div class="shadow-floating-chat" id="chatToggle">💬</div>

<!-- Chatbot Box -->
<div class="chatbot-box" id="chatBox">
  <div class="chatbot-header">
    <div class="d-flex align-items-center">
      <img src="https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-chat/ava1-bg.webp" width="28" alt="Bot">
      <strong>Easy2Learning Chatbot</strong>
    </div>
    <button class="btn-close btn-close-white" id="chatClose"></button>
  </div>
  <div class="chatbot-body" id="chatBody">
    <div class="bot-msg chat-message">
      <div class="msg-bubble">
        Hi! Welcome to Easy2Learning — your trusted destination for engineering and competitive exam coaching.<br>
        📞 +91 85848 64783<br>
        Type <b>courses</b> to see our course list.
      </div>
    </div>
  </div>
  <div class="chatbot-footer">
    <input type="text" id="userInput" placeholder="Type your message..." autocomplete="off">
    <button class="send-btn" onclick="sendMessage()">Send</button>
  </div>
</div>

<script>
const chatToggle = document.getElementById("chatToggle");
const chatBox = document.getElementById("chatBox");
const chatClose = document.getElementById("chatClose");
const chatBody = document.getElementById("chatBody");
const userInput = document.getElementById("userInput");

chatToggle.addEventListener("click", () => {
  chatBox.classList.toggle("show");
});
chatClose.addEventListener("click", () => {
  chatBox.classList.remove("show");
});

const botReplies = [
  {
    triggers: ['hi', 'hello', 'hey', 'good morning', 'good evening'],
    reply: `Hi!<br>Welcome to Easy2Learning — your trusted destination for engineering and competitive exam coaching.<br>
    📞 Contact us: +91 85848 64783<br>
    Feel free to reach out with any questions.<br>
    If you’d like to know about our courses, just type <b>courses</b>.`
  },
  {
    triggers: ['courses', 'course list', 'show me your courses', 'what courses do you offer'],
    reply: `We offer the following courses at Easy2learning:<br><br>
    <b>Foundation Courses:</b><br>• All Diploma Courses (Semester-wise)<br>• B.Tech Courses (Semester-wise)<br><br>
    <b>Certificate Courses:</b><br>• AutoCAD<br>• Solar Internship<br>• Software Courses<br><br>
    <b>Competitive Exams Preparation:</b><br>• JEE (Main & Advanced)<br>• SSC-JE<br>• RRB-JE<br>• WBSEDCL<br>• WBSETCL<br>• WBPSC-JE<br>• WBJEE & Other State Engineering Entrance Exams<br><br>
    Want to know more about any specific course? Just type the course name (e.g., JEE, AutoCAD, WBJEE, etc.)<br><br>
    📲 Download Our Apps:<br>
    • <a href="https://play.google.com/store/apps/details?id=com.easy2learning2.appx" target="_blank">Diploma Students App</a><br>
    • <a href="https://play.google.com/store/apps/details?id=co.edvin.ubglj" target="_blank">B-Tech & JELET App</a>`
  },
  {
    triggers: ['jee', 'jee main', 'jee advanced'],
    reply: `Our <b>JEE (Main & Advanced)</b> program is designed for serious aspirants aiming for top engineering colleges.<br><br>
    • Faculty from IITs & NITs<br>
    • Mock Tests & Performance Analysis<br>
    • One-on-one doubt sessions<br>
    • Study material with PYQs<br>
    • Personalised attention & strategic mentoring<br><br>
    📞 Call us for more info: +91 85848 64783`
  },
  {
    triggers: ['diploma', 'diploma courses'],
    reply: `We offer semester-wise coaching for all Diploma engineering subjects.<br><br>
    • Conceptual clarity & exam-focused teaching<br>
    • One-on-one doubt clearing<br>
    • Weekly assessments & progress tracking<br><br>
    📲 <a href="https://play.google.com/store/apps/details?id=com.easy2learning2.appx" target="_blank">Want to know more about the course? Click here</a>`
  },
  {
    triggers: ['btech', 'b.tech', 'btech course'],
    reply: `Our <b>B.Tech</b> semester-wise coaching helps students with university and competitive exam preparation.<br><br>
    • Topic-wise lectures<br>
    • Smart classroom support<br>
    • Study materials & assignments<br><br>
    📲 <a href="https://play.google.com/store/apps/details?id=co.edvin.ubglj" target="_blank">Want to know more about the course? Click here</a>`
  },
  {
    triggers: ['autocad'],
    reply: `Our <b>AutoCAD</b> certificate course includes:<br><br>
    • Hands-on practical training<br>
    • Real-time projects<br>
    • Certificate upon completion<br>
    • Expert instructors<br><br>
    📞 Call us to enroll: +91 85848 64783`
  },
  {
    triggers: ['wbjee', 'state entrance'],
    reply: `Get ready for <b>WBJEE & other State Engineering Entrance Exams</b> with our expert-designed program.<br><br>
    • Subject-wise coaching<br>
    • Exam-focused strategies<br>
    • Mock tests & practice sessions<br>
    • Doubt-clearing support<br><br>
    📞 Contact us for guidance: +91 85848 64783`
  },
  {
    triggers: ['ssc-je', 'rrb-je', 'wbsedcl', 'wbpsc-je', 'wbsetcl'],
    reply: `We provide dedicated coaching for technical government exams like <b>SSC-JE, RRB-JE, WBSEDCL, WBSETCL, and WBPSC-JE</b>.<br><br>
    • Syllabus-wise structured classes<br>
    • Previous year questions<br>
    • Technical concept clearing<br>
    • Mock tests & assignments<br><br>
    📞 Call us to join: +91 85848 64783`
  },
  {
    triggers: ['about', 'about you', 'about easy2learning', 'who are you'],
    reply: `Easy2learning is a premier coaching institute for engineering and competitive exams.<br><br>
    We help students achieve top results through:<br>
    • Academic excellence<br>
    • Expert faculty from IITs, NITs & PhDs<br>
    • One-on-one doubt sessions<br>
    • Mock tests & personalised mentoring<br>
    • Scholarships & affordable fees<br><br>
    📞 Phone: +91 85848 64783<br>
    📧 Email: contact@easy2learning.in<br>
    📍 Address: 19D, Bhagabati Chatterjee St, Belghariya, Kolkata`
  },
  {
    triggers: ['i want to join a course', 'classes', 'class info', 'can you tell me about your classes', 'i want to know about your courses'],
    reply: `We offer a wide range of programs including Diploma & B.Tech coaching, competitive exam prep (like JEE, SSC-JE), and certificate courses (AutoCAD, Solar Internship, etc.)<br><br>
    📲 Download our apps:<br>
    • <a href="https://play.google.com/store/apps/details?id=com.easy2learning2.appx" target="_blank">Diploma App</a><br>
    • <a href="https://play.google.com/store/apps/details?id=co.edvin.ubglj" target="_blank">B-Tech & JELET App</a><br><br>
    🌐 Explore full course info: <a href="#" target="_blank">Visit Website</a><br><br>
    Need info on a specific course? Just type the course name!`
  }
];

function sendMessage() {
  const userText = userInput.value.trim();
  if (!userText) return;

  const userMsg = document.createElement("div");
  userMsg.classList.add("chat-message","user-msg");
  userMsg.innerHTML = `<div class="msg-bubble">${userText}</div>`;
  chatBody.appendChild(userMsg);
  userInput.value = "";
  chatBody.scrollTop = chatBody.scrollHeight;

  const lowerText = userText.toLowerCase();
  const matchedReply = botReplies.find(item =>
    item.triggers.some(trigger => lowerText.includes(trigger))
  )?.reply;

  const botMsg = document.createElement("div");
  botMsg.classList.add("chat-message","bot-msg");
  botMsg.innerHTML = `<div class="msg-bubble">...</div>`;
  chatBody.appendChild(botMsg);
  chatBody.scrollTop = chatBody.scrollHeight;

  setTimeout(() => {
    botMsg.innerHTML = `<div class="msg-bubble">${matchedReply || "Sorry, I didn’t catch that. Try <b>courses</b> or <b>about</b>."}</div>`;
    chatBody.scrollTop = chatBody.scrollHeight;
  }, 700);
}

userInput.addEventListener("keypress", function(e) {
  if (e.key === "Enter") sendMessage();
});
</script>




<!-- Bootstrap JS Bundle -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
{% endblock %}
